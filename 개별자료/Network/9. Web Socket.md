## 9. Web Socket

> 두 프로그램 간의 메시지를 교환하기 위한 통신 방법 중 하나.
현재 인터넷 환경(HTML5)에서 많이 사용된다.
웹 소켓을 지원하는 브라우저는 **웹 소켓 프로토콜**을 지원
>

### “웹 소켓의 특징”

- **양 방향 통신**
    - 데이터와 송수신을 동시에 처리할 수 있는 통신방법
    - 클라이언트나 서버가 서로에게 **원할 때** 데이터를 주고 받을 수 있음
        - 통상적인 HTTP는 **단방향 통신 (Client Request → Server Response)**
- **실시간 네트워킹**
    - 웹 환경에서 연속된 데이터를 빠르게 노출
    - 여러 단말기에 빠르게 데이터를 교환
- 최초 접속에만 HTTP 위에서 통신하게 되므로, HTTP Header를 사용한다.
- 웹 소켓을 위한 별도의 포트가 없어 기존의 포트를 사용한다.(HTTP-80, HTTPS-443)
- 프레임으로 구성된 메시지라는 단위로 송수신
    - 메시지는 **텍스트 또는 바이너리만 포함 가능**하다.

### “웹 소켓 이전의 비슷한 기술”

- **Polling**
    - 일정 주기로 요청 송신
    - 언제 통신이 발생할 지 몰라 Connection을 계속 유지하며 대기
- **Long Polling**
    - 요청에 대한 응답이 발생할 때 까지만 대기
    - 응답이 발생하면 통신을 끊었다가 다시 연결
        - 따라서 요청과 통신의 주기가 짧게 반복되면 Polling과 차이가 없다
- **Streaming**
    - 서버가 끊이지 않고 데이터를 수신
    - 따라서 클라이언트에서 서버로의 수신이 힘들다

### “웹 소켓의 한계 - Socket.io, SockJS”

- HTML5 이전의 기술로 구현된 서비스에서 웹 소켓처럼 사용할 수 있도록 만든 기술
- javascript를 사용하여 브라우저에 관계 없이 실시간 웹 구현

### “웹 소켓의 한계 - STOMP”

> STOMP : **Simple Text Oriented Message Protocol**
>
- 웹 소켓에서 문자열을 주고받을 수 있게 해주는 프로토콜
- 문자열의 해석은 온전히 애플리케이션의 몫
- HTTP는 형식이 정해져 있지만, 웹 소켓은 정해져있는 형식이 없으므로 애플리케이션에서 해석이 힘듬
- 따라서 웹 소켓 방식은 sub-protocol을 사용해서 주고 받은 메시지의 형태를 약속하는 경우가 많다.